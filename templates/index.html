<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Stress Level Predictor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="card">
    <h1>Stress Level Predictor</h1>

    <form method="POST">
      <label>Who are you?</label>
      <select name="role" required>
        <option value="0">Student</option>
        <option value="1">College Student</option>
        <option value="2">Working Professional</option>
      </select>

      <label>Daily Screen Time</label>
      <select name="screen" required>
        <option value="0">Less than 3 hours</option>
        <option value="1">3‚Äì6 hours</option>
        <option value="2">More than 6 hours</option>
      </select>

      <label>Exercise per day</label>
      <select name="exercise" required>
        <option value="0">None</option>
        <option value="1">30 minutes</option>
        <option value="2">1 hour+</option>
      </select>

      <label>Lifestyle</label>
      <select name="lifestyle" required>
        <option value="0">Balanced</option>
        <option value="1">Sometimes stressed</option>
        <option value="2">Mostly scrolling</option>
      </select>

      <button type="submit">Analyze Stress</button>
    </form>

    {% if stress %}
    <div class="result">
      <h2>{{ stress }}</h2>

      <div class="meter">
        <div class="fill" style="width: {{ score }}%"></div>
      </div>

      <p class="score">{{ score }} / 100</p>

      <canvas id="stressChart"></canvas>

      <p class="tip">{{ tip }}</p>
    </div>

    <script>
      const ctx = document.getElementById("stressChart");
      new Chart(ctx, {
        type: "doughnut",
        data: {
          datasets: [{
            data: [{{ score }}, {{ 100 - score }}],
            backgroundColor: ["#ef4444", "#e5e7eb"],
            borderWidth: 0
          }]
        },
        options: {
          cutout: "70%",
          plugins: { legend: { display: false } }
        }
      });
    </script>
    {% endif %}

    <button onclick="toggleTheme()" class="theme-btn">üåô / ‚òÄÔ∏è</button>
  </div>

  <script>
    function toggleTheme() {
      document.body.classList.toggle("dark");
    }
  </script>
</body>
</html>
